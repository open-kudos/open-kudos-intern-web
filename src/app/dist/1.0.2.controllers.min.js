!function(){"use strict";function e(e,n,o){function r(e){n.use(e)}function t(n){'"en"'==n?(e.lt=!1,e.en=!0):'"lt"'==n&&(e.lt=!0,e.en=!1)}e.changeLanguage=r,e.languageButtons=t,e.languageButtons(o.get("NG_TRANSLATE_LANG_KEY"))}angular.module("myApp").controller("AppController",e),e.$inject=["$scope","$translate","$cookies"]}(),function(){"use strict";function e(e,n,o,r){function t(){i(),void 0==e.user?o.userHome().then(function(n){r.setCurrentUser(n),e.user=r.getCurrentUser(),e.user.$$hashKey="0:0"}):(e.user=r.getCurrentUser(),e.user.$$hashKey="0:0")}function i(){o.checkUser().then(function(e){e.logged?n.location.href="#/acorns":n.location.href="#/login"})}e.showLoader=!0,e.checkUser=i,t()}angular.module("myApp.acorn",["ngRoute","ngCookies"]).controller("AcornController",e),e.$inject=["$scope","$window","ProfileService","Resources"]}(),function(){function e(e,n){function o(){r()}function r(){n.checkUser().then(function(n){n.logged?e.location.href="#/profile":e.location.href="#/feed"})}o()}e.$inject=["$window","ProfileService"],angular.module("myApp.components.feed",["ngRoute","ngCookies"]).controller("FeedController",e)}(),function(){"use strict";function e(e,n,o,r,t,i){function s(){p()?u(v()):l()}function c(){d(e.email,e.password)&&a(w())}function a(e){t.login(e).then(function(e){g(e)&&(f(),i.path("/profile"))})}function u(e){t.login(e).then(function(e){g(e)&&i.path("/profile")})}function l(){t.checkUser().then(function(e){return e.data.logged})}function f(){var r=new Date;r.setDate(r.getDate()+360),n.put("remember_user","true",{expires:r}),n.put("user_credentials",o.encode(e.email+"@swedbank"+e.domain+":"+e.password),{expires:r})}function d(e,n){if(null==e)h("Please enter Email");else if(null==n)h("Please enter Password");else{if(m(e))return!0;h("Wrong email format")}}function g(e){if("user_not_exist"==e)h("User not exists");else if("email_password_mismatch"==e)h("Wrong email or password");else{if("user_not_confirmed"!=e)return!0;h("User not confirmed ")}}function m(e){var n=/[a-zA-Z]\W[a-zA-Z]/;return n.test(e)?(n=/@/,!n.test(e)):n.test(e)}function h(n){return e.errorMessage=n,e.showError=!0,!1}function p(){return null!=n.get("remember_user")&&void 0!=n.get("remember_user")&&"true"===n.get("remember_user")}function w(){return{email:e.email+"@swedbank"+e.domain,password:e.password}}function v(){if(null!=n.get("user_credentials")&&void 0!=n.get("user_credentials")){var e=o.decode(n.get("user_credentials")).split(":");return{email:e[0],password:e[1]}}return!1}document.getElementById("email"),document.getElementById("password");e.showLoader=!1,e.showError=!1,e.domain=".lt",e.login=c,e.isRememberedUser=p,e.rememberUser=f,e.validateEmail=m,s()}angular.module("myApp.login",["ngRoute","ngCookies","base64"]).controller("LoginController",e),e.$inject=["$scope","$cookies","$base64","$httpParamSerializer","LoginService","$location"]}(),function(){"use strict";var e=function(e,n,o,r,t,i,s,c,a,u){function l(){f(),c.logout().catch(function(){o.location.href="#/login"})}function f(){r.put("remember_user","false"),r.put("user_credentials","")}function d(e){return"undefined"==typeof e}function g(e){return e>1?e+" Acorns":e+" Acorn"}n.userAvailableKudos=0,n.usersCollection=[],n.buttonDisabled=!0,n.receivedAcorns=!1,n.sentAcorns=!0,n.showDropDown=!1,n.receiverErrorClass="",n.receiverErrorMessage="",n.amountErrorClass="",n.amountErrorMessage="",n.notificationsCollection=u.getNotificationsTransactionCollection(),n.logout=l,n.isValid=d,n.acornPlural=g,c.remainingKudos().then(function(e){u.setUserAvailableKudos(e)}),c.receivedKudos().then(function(e){n.userReceivedKudos=e}),c.listUsers().then(function(e){n.usersCollection=e.userList}),n.$watch(function(){return u.getUserAvailableKudos()},function(e){d(e)||(n.userAvailableKudos=u.getUserAvailableKudos())})};e.$inject=["$http","$scope","$window","$cookies","$timeout","$httpParamSerializer","$filter","ProfileService","Challenges","Resources"],angular.module("myApp.notification",["ngRoute","ngCookies"]).controller("NotificationController",e)}(),function(){function e(e,n,o,r,t){function i(){s(),o.userHome().then(function(e){r.setCurrentUser(e),r.setCurrentUserEmail(e.email)}),o.remainingKudos().then(function(e){r.setUserAvailableKudos(e),a.showLoaderUserAvailableKudos=!1}),o.receivedKudos().then(function(e){a.userReceivedKudos=e,a.showLoaderUserReceivedKudos=!1}),t.isEmptyCollection(r.getUsersCollection())&&o.listUsers().then(function(e){r.setUsersCollection(e.userList),a.usersCollection=r.getUsersCollection()})}function s(){o.checkUser().then(function(e){e.logged?n.location.href="#/profile":n.location.href="#/login"})}function c(e){return"undefined"==typeof e}var a=this;a.showLoaderUserAvailableKudos=!0,a.showLoaderUserReceivedKudos=!0,a.userAvailableKudos=0,a.userReceivedKudos=0,a.usersCollection=[],a.topReceivers=[],a.buttonDisabled=!0,a.receivedAcorns=!1,a.sentAcorns=!0,a.giveAcorns=!1,a.newChallengeTab=!0,a.showDropDown=!1,a.receiverErrorClass="",a.receiverErrorMessage="",a.amountErrorClass="",a.amountErrorMessage="",a.isValid=c,i(),e.$watch(function(){return r.getUserAvailableKudos()},function(e){c(e)||(a.userAvailableKudos=r.getUserAvailableKudos())})}e.$inject=["$scope","$window","ProfileService","Resources","Utils"],angular.module("myApp.profile",["ngRoute","ngCookies"]).controller("ProfileController",e)}(),function(){"use strict";var e=function(e,n,o,r,t,i,s,c,a,u){function l(){var n=e.fullName,o=f(e.email),r=d(e.password,e.confirmPassword);if(m(n),p&&o&&r){e.showLoader=!0;var t=s({email:o+"@swedbank"+e.domain,firstName:w[0],lastName:w[1],password:e.password,confirmPassword:e.confirmPassword});c.register(t).then(function(n){e.showLoader=!1,g(""),"Error"!=n?(toastr.info("Check your email for account confirmation code"),toastr.success("Registration successful"),u.path("/login")):g("User already exists")})}}function f(e){if(e)return e.indexOf(".")>-1&&e}function d(e,n){return e==n}function g(n){e.errorMessage=n}function m(e){if(e)return w=e.split(" "),e[1]&&(p=!0),w}function h(n){e.domain=n}var p=!1,w=[];e.showLoader=!1,e.domain=".lt",e.register=l,e.split=m,e.checkEmail=f,e.checkPasswordMatch=d,e.showErrorMessage=g,e.changeDomain=h};e.$inject=["$scope","$http","$cookies","$base64","$window","$translate","$httpParamSerializer","RegistrationService","LoginService","$location"],angular.module("myApp.registration",["ngRoute","ngCookies","ngMessages","base64"]).controller("registrationController",e).directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(e,n,o,r){e.$watch(function(){var n;return(e.passwordVerify||r.$viewValue)&&(n=e.passwordVerify+"_"+r.$viewValue),n},function(n){n&&r.$parsers.unshift(function(n){var o=e.passwordVerify;return o!==n?void r.$setValidity("passwordVerify",!1):(r.$setValidity("passwordVerify",!0),n)})})}}})}(),function(){function e(e,n,o){function r(){n(function(){i.subscribed=e.getCurrentUser(),"undefined"==typeof i.subscribed?o.home().then(function(e){i.subscribed=e.subscribing}):i.subscribed=i.subscribed.subscribing,i.showLoader=!1},200)}function t(){switch(i.subscribed){case!0:o.subscribe().then(function(n){e.getCurrentUser().subscribed=n});break;case!1:o.unsubscribe().then(function(n){e.getCurrentUser().subscribed=n})}}var i=this;i.subscribed=!1,i.showLoader=!0,i.subscription=t,r()}e.$inject=["Resources","$timeout","User"],angular.module("myApp.settings",[]).controller("SettingsController",e)}(),function(){function e(e,n){function o(){r()}function r(){n.checkUser().then(function(n){n.logged?e.location.href="#/following":e.location.href="#/login"})}var t=this;t.$onInit=o()}e.$inject=["$window","ProfileService"],angular.module("myApp.components.following",[]).controller("FollowingController",e)}(),function(){function e(e,n,o,r){function t(){o.getNewTransactions().then(function(e){0!=e.length&&(n.setNotificationsTransactionCollection(e),c.newTransactionCollection=e,c.notificationBadgeAmount=e.length,c.receivedNewTransaction=!0,a=e[0].timestamp)})}function i(){1==c.notificationsToggle?c.notificationsToggle=!1:c.notificationsToggle=!0,e.path("/notifications"),0!=c.newTransactionCollection.length&&(s(c.newTransactionCollection[0].timestamp),c.notificationBadgeAmount=0,c.receivedNewTransaction=!1)}function s(e){o.setLastTransaction(e)}var c=this;c.newTransactionCollection=[],c.notificationBadgeAmount=0,c.receivedNewTransaction=!1,c.notificationsToggle=!1,c.clearNotifications=i,c.checkNotifications=t,c.acornPlural=r.acornPlural;var a;t()}e.$inject=["$location","Resources","KudosNotificationService","Utils"],angular.module("myApp.components.notifications",[]).controller("NotificationsController",e)}();