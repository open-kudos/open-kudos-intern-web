!function(){"use strict";function e(e,o,n){function r(e){o.use(e)}function t(o){'"en"'==o?(e.lt=!1,e.en=!0):'"lt"'==o&&(e.lt=!0,e.en=!1)}e.changeLanguage=r,e.languageButtons=t,e.languageButtons(n.get("NG_TRANSLATE_LANG_KEY"))}angular.module("myApp").controller("AppController",e),e.$inject=["$scope","$translate","$cookies"]}(),function(){"use strict";function e(e,o,n,r){function t(){i(),void 0==e.user?n.userHome().then(function(o){r.setCurrentUser(o),e.user=r.getCurrentUser(),e.user.$$hashKey="0:0"}):(e.user=r.getCurrentUser(),e.user.$$hashKey="0:0")}function i(){n.checkUser().then(function(e){e.logged?o.location.href="#/acorns":o.location.href="#/login"})}e.showLoader=!0,e.checkUser=i,t()}angular.module("myApp.acorn",["ngRoute","ngCookies"]).controller("AcornController",e),e.$inject=["$scope","$window","ProfileService","Resources"]}(),function(){function e(e,o){function n(){r()}function r(){o.checkUser().then(function(o){o.logged?e.location.href="#/profile":e.location.href="#/feed"})}n()}e.$inject=["$window","ProfileService"],angular.module("myApp.components.feed",["ngRoute","ngCookies"]).controller("FeedController",e)}(),function(){"use strict";var e=function(e,o){o.topSenders=!0};e.$inject=["$http","$scope"],angular.module("myApp.acorn.leaderboard",["ngRoute","ngCookies"]).controller("LeaderboardController",e)}(),function(){"use strict";function e(e,o,n,r,t,i){function s(){p()?u(v()):l()}function c(){d(e.email,e.password)&&a(w())}function a(e){t.login(e).then(function(e){g(e)&&(f(),i.path("/profile"))})}function u(e){t.login(e).then(function(e){g(e)&&i.path("/profile")})}function l(){t.checkUser().then(function(e){return e.data.logged})}function f(){var r=new Date;r.setDate(r.getDate()+360),o.put("remember_user","true",{expires:r}),o.put("user_credentials",n.encode(e.email+"@swedbank"+e.domain+":"+e.password),{expires:r})}function d(e,o){if(null==e)h("Please enter Email");else if(null==o)h("Please enter Password");else{if(m(e))return!0;h("Wrong email format")}}function g(e){if("user_not_exist"==e)h("User not exists");else if("email_password_mismatch"==e)h("Wrong email or password");else{if("user_not_confirmed"!=e)return!0;h("User not confirmed ")}}function m(e){var o=/[a-zA-Z]\W[a-zA-Z]/;return o.test(e)?(o=/@/,!o.test(e)):o.test(e)}function h(o){return e.errorMessage=o,e.showError=!0,!1}function p(){return null!=o.get("remember_user")&&void 0!=o.get("remember_user")&&"true"===o.get("remember_user")}function w(){return{email:e.email+"@swedbank"+e.domain,password:e.password}}function v(){if(null!=o.get("user_credentials")&&void 0!=o.get("user_credentials")){var e=n.decode(o.get("user_credentials")).split(":");return{email:e[0],password:e[1]}}return!1}document.getElementById("email"),document.getElementById("password");e.showLoader=!1,e.showError=!1,e.domain=".lt",e.login=c,e.isRememberedUser=p,e.rememberUser=f,e.validateEmail=m,s()}angular.module("myApp.login",["ngRoute","ngCookies","base64"]).controller("LoginController",e),e.$inject=["$scope","$cookies","$base64","$httpParamSerializer","LoginService","$location"]}(),function(){"use strict";var e=function(e,o,n,r,t,i,s,c,a,u){function l(){f(),c.logout().catch(function(){n.location.href="#/login"})}function f(){r.put("remember_user","false"),r.put("user_credentials","")}function d(e){return"undefined"==typeof e}function g(e){return e>1?e+" Acorns":e+" Acorn"}o.userAvailableKudos=0,o.usersCollection=[],o.buttonDisabled=!0,o.receivedAcorns=!1,o.sentAcorns=!0,o.showDropDown=!1,o.receiverErrorClass="",o.receiverErrorMessage="",o.amountErrorClass="",o.amountErrorMessage="",o.notificationsCollection=u.getNotificationsTransactionCollection(),o.logout=l,o.isValid=d,o.acornPlural=g,c.remainingKudos().then(function(e){u.setUserAvailableKudos(e)}),c.receivedKudos().then(function(e){o.userReceivedKudos=e}),c.listUsers().then(function(e){o.usersCollection=e.userList}),o.$watch(function(){return u.getUserAvailableKudos()},function(e){d(e)||(o.userAvailableKudos=u.getUserAvailableKudos())})};e.$inject=["$http","$scope","$window","$cookies","$timeout","$httpParamSerializer","$filter","ProfileService","Challenges","Resources"],angular.module("myApp.notification",["ngRoute","ngCookies"]).controller("NotificationController",e)}(),function(){function e(e,o,n,r,t){function i(){s(),n.userHome().then(function(e){r.setCurrentUser(e),r.setCurrentUserEmail(e.email)}),n.remainingKudos().then(function(e){r.setUserAvailableKudos(e),a.showLoaderUserAvailableKudos=!1}),n.receivedKudos().then(function(e){a.userReceivedKudos=e,a.showLoaderUserReceivedKudos=!1}),t.isEmptyCollection(r.getUsersCollection())&&n.listUsers().then(function(e){r.setUsersCollection(e.userList),a.usersCollection=r.getUsersCollection()})}function s(){n.checkUser().then(function(e){e.logged?o.location.href="#/profile":o.location.href="#/login"})}function c(e){return"undefined"==typeof e}var a=this;a.showLoaderUserAvailableKudos=!0,a.showLoaderUserReceivedKudos=!0,a.userAvailableKudos=0,a.userReceivedKudos=0,a.usersCollection=[],a.topReceivers=[],a.buttonDisabled=!0,a.receivedAcorns=!1,a.sentAcorns=!0,a.giveAcorns=!1,a.newChallengeTab=!0,a.showDropDown=!1,a.receiverErrorClass="",a.receiverErrorMessage="",a.amountErrorClass="",a.amountErrorMessage="",a.isValid=c,i(),e.$watch(function(){return r.getUserAvailableKudos()},function(e){c(e)||(a.userAvailableKudos=r.getUserAvailableKudos())})}e.$inject=["$scope","$window","ProfileService","Resources","Utils"],angular.module("myApp.profile",["ngRoute","ngCookies"]).controller("ProfileController",e)}(),function(){"use strict";var e=function(e,o,n,r,t,i,s,c,a,u){function l(){var o=e.fullName,n=f(e.email),r=d(e.password,e.confirmPassword);if(m(o),p&&n&&r){e.showLoader=!0;var t=s({email:n+"@swedbank"+e.domain,firstName:w[0],lastName:w[1],password:e.password,confirmPassword:e.confirmPassword});c.register(t).then(function(o){e.showLoader=!1,g(""),"Error"!=o?(toastr.info("Check your email for account confirmation code"),toastr.success("Registration successful"),u.path("/login")):g("User already exists")})}}function f(e){if(e)return e.indexOf(".")>-1&&e}function d(e,o){return e==o}function g(o){e.errorMessage=o}function m(e){if(e)return w=e.split(" "),e[1]&&(p=!0),w}function h(o){e.domain=o}var p=!1,w=[];e.showLoader=!1,e.domain=".lt",e.register=l,e.split=m,e.checkEmail=f,e.checkPasswordMatch=d,e.showErrorMessage=g,e.changeDomain=h};e.$inject=["$scope","$http","$cookies","$base64","$window","$translate","$httpParamSerializer","RegistrationService","LoginService","$location"],angular.module("myApp.registration",["ngRoute","ngCookies","ngMessages","base64"]).controller("registrationController",e).directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(e,o,n,r){e.$watch(function(){var o;return(e.passwordVerify||r.$viewValue)&&(o=e.passwordVerify+"_"+r.$viewValue),o},function(o){o&&r.$parsers.unshift(function(o){var n=e.passwordVerify;return n!==o?void r.$setValidity("passwordVerify",!1):(r.$setValidity("passwordVerify",!0),o)})})}}})}(),function(){function e(e,o,n){function r(){o(function(){i.subscribed=e.getCurrentUser(),"undefined"==typeof i.subscribed?n.home().then(function(e){i.subscribed=e.subscribing}):i.subscribed=i.subscribed.subscribing,i.showLoader=!1},200)}function t(){switch(i.subscribed){case!0:n.subscribe().then(function(o){e.getCurrentUser().subscribed=o});break;case!1:n.unsubscribe().then(function(o){e.getCurrentUser().subscribed=o})}}var i=this;i.subscribed=!1,i.showLoader=!0,i.subscription=t,r()}e.$inject=["Resources","$timeout","User"],angular.module("myApp.settings",[]).controller("SettingsController",e)}(),function(){function e(e,o){function n(){r()}function r(){o.checkUser().then(function(o){o.logged?e.location.href="#/following":e.location.href="#/login"})}var t=this;t.$onInit=n()}e.$inject=["$window","ProfileService"],angular.module("myApp.components.following",[]).controller("FollowingController",e)}(),function(){function e(e,o,n,r){function t(){n.getNewTransactions().then(function(e){0!=e.length&&(o.setNotificationsTransactionCollection(e),c.newTransactionCollection=e,c.notificationBadgeAmount=e.length,c.receivedNewTransaction=!0,a=e[0].timestamp)})}function i(){1==c.notificationsToggle?c.notificationsToggle=!1:c.notificationsToggle=!0,e.path("/notifications"),0!=c.newTransactionCollection.length&&(s(c.newTransactionCollection[0].timestamp),c.notificationBadgeAmount=0,c.receivedNewTransaction=!1)}function s(e){n.setLastTransaction(e)}var c=this;c.newTransactionCollection=[],c.notificationBadgeAmount=0,c.receivedNewTransaction=!1,c.notificationsToggle=!1,c.clearNotifications=i,c.checkNotifications=t,c.acornPlural=r.acornPlural;var a;t()}e.$inject=["$location","Resources","KudosNotificationService","Utils"],angular.module("myApp.components.notifications",[]).controller("NotificationsController",e)}();