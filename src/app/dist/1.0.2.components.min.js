!function(){function e(e,t,o){function n(){var o=e({authorName:i.author,idea:i.idea}),n=a();n&&t.addNewIdea(o).then(function(){$("#addIdeaModal").modal("hide"),toastr.success("You successfully added new idea to wisdom wall"),l()})}function l(){i.author=null,i.idea=null,s("")}function a(){return null==i.author?(s("Please enter author of the idea"),!1):null==i.idea?(s("Please enter idea"),!1):(s(""),!0)}function s(e){i.errorClass="error-message",i.addIdeaFormErrorMessage=e}var i=this;i.lengthLimit=o.lengthLimit,i.symbolsLeft=o.symbolsLeft,i.addIdeaFormCheck=a,i.showAddIdeaFormErrorMessage=s,i.addIdea=n,i.clearAddIdeaFormValues=l}e.$inject=["$httpParamSerializer","AddNewIdeaService","Utils"],angular.module("myApp.components.addNewIdea",[]).component("kudosAddNewIdea",{templateUrl:"app/components/kudos-add-new-idea/kudos-add-new-idea.html",controller:e,controllerAs:"newIdea"})}(),function(){function e(e,t,o,n){function l(){e.getCompletedChallenges().then(function(e){t.setCompletedChallenges(e),u.completedChallengesCollection=t.getCompletedChallenges(),u.completedChallengesCollection=s(u.completedChallengesCollection),i(e)}),t.getCurrentUserEmail()?u.userEmail=t.getCurrentUserEmail():o.userHome().then(function(e){t.setCurrentUserEmail(e.email),u.userEmail=t.getCurrentUserEmail()})}function a(e){return t.getCompletedChallenges()[e].creatorStatus?t.getCompletedChallenges()[e].creatorEmail==t.getCurrentUserEmail()?"You won the challenge!":t.getCompletedChallenges()[e].creatorEmail+" won the challenge":0==t.getCompletedChallenges()[e].creatorStatus?t.getCompletedChallenges()[e].creatorEmail==t.getCurrentUserEmail()?t.getCompletedChallenges()[e].participantEmail+" won the challenge":"You won the challenge!":t.getCompletedChallenges()[e].participantStatus?t.getCompletedChallenges()[e].participantEmail==t.getCurrentUserEmail()?"You won the challenge!":t.getCompletedChallenges()[e].participantEmail+" won the challenge":0==t.getCompletedChallenges()[e].participantStatus?t.getCompletedChallenges()[e].participantEmail==t.getCurrentUserEmail()?t.getCompletedChallenges()[e].creatorEmail+" won the challenge":"You won the challenge!":void 0}function s(e){if(e)for(var t=0;t<e.length;t++)for(var o=t;o<e.length;o++)if(e[t].createDate<e[o].createDate){var n=e[t];e[t]=e[o],e[o]=n}return e}function i(e){u.showMoreButton=e.length>u.completedChallengesLimit}function r(){u.completedChallengesLimit+=d,i(t.getCompletedChallenges())}function c(){u.completedChallengesLimit=d,i(t.getCompletedChallenges()),u.showLessButton=!1}var u=this,d=5;u.completedChallengesLimit=5,u.completedChallengesCollection=[],u.showList=!1,u.acornPlural=n.acornPlural,u.getWinner=a,u.showMore=r,u.showLess=c,u.showMoreButton=i,u.$onInit=l()}e.$inject=["Challenges","Resources","ProfileService","Utils"],angular.module("myApp.components.completedChallenges",[]).component("kudosChallengeCompleted",{templateUrl:"app/components/kudos-challenge-completed/kudos-challenge-completed.html",controller:e,controllerAs:"chCompleted"})}(),function(){function e(e,t,o,n,l){function a(){s(),o.getCurrentUserEmail()?h.userEmail=o.getCurrentUserEmail():n.userHome().then(function(e){o.setCurrentUserEmail(e.email),h.userEmail=o.getCurrentUserEmail()})}function s(){h.id=!1,t.getNewChallenges().then(function(e){o.setNewChallenges(e),h.challengeList=o.getNewChallenges(),h.showLoaderNew=!1})}function i(n,l,a){var i=o.getUserAvailableKudos();g=e({id:n}),i>=a?t.acceptChallenge(g).then(function(e){toastr.success("You accepted "+e.data.creator+" challenge"),u(l),o.setUserAvailableKudos(o.getUserAvailableKudos()-e.data.amount),o.getOngoingChallenges().push(e.data),s(),h.challengeList=o.getNewChallenges()}):toastr.error("You only have  "+acornPlural(i)+". To accept challenge, you must have at least "+a)}function r(n){var l=e({id:h.challengeList[n].id});t.cancelChallenge(l).then(function(e){o.setUserAvailableKudos(o.getUserAvailableKudos()+e.data.amount),o.getNewChallenges().splice(n,1),o.getCompletedChallenges().unshift(e.data),h.challengeList=o.getNewChallenges(),toastr.success("Challenge canceled")})}function c(o,n){g=e({id:o}),t.declineChallenge(g).then(function(e){toastr.info("You declined "+e.data.creator+" challenge"),u(n),s(),refreshList()})}function u(e){h.challengeList[0]&&h.challengeList.splice(e,1)}function d(e){if(e)return e=e.split(":"),e=e[0]+":"+e[1]}function m(e){return null==o.getNewChallenges()[e].finishDate}var g,h=this;h.showLoaderNew=!0,h.challengeList=[],h.getChallengeParticipatedList=s,h.acceptChallenge=i,h.declineChallenge=c,h.cancelChallenge=r,h.removeElement=u,h.acornPlural=l.acornPlural,h.userEmail=o.getCurrentUserEmail(),h.doesDateExist=m,h.convertDate=d,h.$onInit=a()}e.$inject=["$httpParamSerializer","Challenges","Resources","ProfileService","Utils"],angular.module("myApp.components.challengeNew",[]).component("kudosChallengeNew",{templateUrl:"app/components/kudos-challenge-new/kudos-challenge-new.html",controller:e,controllerAs:"chNew"})}(),function(){function e(e,t,o,n,l){function a(){s(),o.getCurrentUserEmail()?g.userEmail=o.getCurrentUserEmail():n.userHome().then(function(e){o.setCurrentUserEmail(e.email),g.userEmail=o.getCurrentUserEmail()})}function s(){t.getOngoingChallenges().then(function(e){o.setOngoingChallenges(e),g.ongoingChallengeList=o.getOngoingChallenges()})}function i(o){var n=!1;m=e({id:o,status:n}),t.accomplishChallenge(m).then(function(e){toastr.success("You think that you lost challenge. Well... maybe not!")})}function r(o){var n=!0;m=e({id:o,status:n}),t.accomplishChallenge(m).then(function(e){toastr.success("You think that you won challenge. Well... maybe not!")})}function c(e){return g.userEmail=o.getCurrentUserEmail(),e.creatorEmail==g.userEmail?null==e.creatorStatus:e.participantEmail==g.userEmail?null==e.participantStatus:void 0}function u(e){return e.creatorEmail==g.userEmail?0==e.participantStatus?g.selectedMessage=e.participantEmail+" thinks he lost":1==e.participantStatus&&(g.selectedMessage=e.participantEmail+" thinks he won"):e.participantEmail==g.userEmail?0==e.creatorStatus?g.selectedMessage=e.creatorEmail+" thinks he lost":1==e.creatorStatus&&(g.selectedMessage=e.creatorEmail+" thinks he won"):void 0}function d(e){return e=e.split(":"),e=e[0]+":"+e[1]}var m,g=this;g.ongoingChallengeList=[],g.getChallengeOngoingList=s,g.won=r,g.lost=i,g.convertDate=d,g.showButtons=c,g.isSelected=u,g.acornPlural=l.acornPlural,g.convertDate=d,g.$onInit=a()}e.$inject=["$httpParamSerializer","Challenges","Resources","ProfileService","Utils"],angular.module("myApp.components.challengeOngoing",[]).component("kudosChallengeOngoing",{templateUrl:"app/components/kudos-challenge-ongoing/kudos-challenge-ongoing.html",controller:e,controllerAs:"chOngoing"})}(),function(){var e=function(e,t,o){function n(e){o.confirmUser(e).then(function(e){var t=$(".modal.fade.in");"Error"!=e?(toastr.success("Confirmed successfully, you can login now","Success"),t.modal("hide")):toastr.error("Wrong activation code","Error")})}e.confirm=n,e.$on("$locationChangeStart",function(e,t,o){var n=$(".modal.fade.in");1==(n.data("bs.modal")||{}).isShown&&(n.modal("hide"),e.preventDefault())})};e.$inject=["$scope","$location","ConfirmEmailService"],angular.module("myApp.components.confirm-email",[]).component("kudosConfirmEmail",{templateUrl:"app/components/kudos-confirm-email/kudos-confirm-email.html",controller:"ConfirmEmailController"}).controller("ConfirmEmailController",e)}(),function(){function e(e,t,o,n,l){function a(){l.isEmptyCollection(t.getUsersCollection())?o.listUsers().then(function(e){t.setUsersCollection(e),m.usersCollection=t.getUsersCollection()}):m.usersCollection=t.getUsersCollection()}function s(){var a=n("date")(m.giveChallengeExpirationDate,g),s=n("date")(new Date,g);m.userEmail=t.getCurrentUserEmail();var u=e({participant:m.giveChallengeTo,name:m.giveChallengeName,description:m.giveChallengeDescription,finishDate:a,amount:m.giveChallengeAmountOfKudos}),d=i(a,s);d&&o.createChallenge(u).then(function(e){r(),$("#giveChallengeModal").modal("hide"),toastr.success("You successfully challenged "+e.data.participantName+" with "+l.acornPlural(e.data.amount)+"."),t.setUserAvailableKudos(t.getUserAvailableKudos()-e.data.amount),t.getNewChallenges().push(e.data)}).catch(function(){c("Challenge receiver does not exist")})}function i(e,t){return null==m.giveChallengeName?(c("Please enter Challenge name"),!1):null==m.giveChallengeAmountOfKudos?(c("Please enter valid challenge Acorns"),!1):m.giveChallengeAmountOfKudos>m.userAvailableKudos?(c("You don't have enough of Acorns"),!1):null==m.giveChallengeTo?(c("Please enter challenge receiver"),!1):m.giveChallengeTo==m.userEmail?(c("You can't challenge yourself"),!1):e<=t?(c("You can not choose date in the past"),!1):(c(""),m.showError=!1,!0)}function r(){m.giveChallengeTo=null,m.giveChallengeReferee=null,m.giveChallengeName=null,m.giveChallengeDescription=null,m.giveChallengeExpirationDate=null,m.giveChallengeAmountOfKudos=null,m.autocompleteHide=!0,m.showError=!1,m.challengeFormErrorMessage="",m.userAvailableKudos=t.getUserAvailableKudos()}function c(e){m.showError=!0,m.challengeFormErrorMessage=e}function u(e){m.giveChallengeTo=e,m.autocompleteHide=!0,m.text=e}function d(){void 0!=m.giveChallengeTo&&(m.autocompleteHide=m.giveChallengeTo.length<=1)}var m=this,g="yyyy-MM-dd HH:mm:ss,sss";m.userAvailableKudos=0,m.autocompleteHide=!0,m.showError=!1,m.usersCollection=[],m.lengthLimit=l.lengthLimit,m.clearChallengeFormValues=r,m.challengeFormCheck=i,m.giveChallenge=s,m.showChallengeFormErrorMessage=c,m.giveToInputChanged=d,m.selectAutoText=u,m.$onInit=a()}angular.module("myApp.components.giveChallenge",[]).component("kudosGiveChallenge",{templateUrl:"app/components/kudos-give-challenge/kudos-give-challenge.html",controllerAs:"giveChallenge",controller:e}),e.$inject=["$httpParamSerializer","Resources","GiveChallengeService","$filter","Utils"]}(),function(){function e(e,t,o,n,l,a){function s(){d.giveChallengeTo=d.email,d.id=d.index,t.getUsersCollection()?d.usersCollection=t.getUsersCollection():o.listUsers().then(function(e){t.setUsersCollection(e.userList),d.usersCollection=t.getUsersCollection()}),t.getUserAvailableKudos()?d.userAvailableKudos=t.getUserAvailableKudos():l.remainingKudos().then(function(e){t.setUserAvailableKudos(e),d.userAvailableKudos=t.getUserAvailableKudos()})}function i(){var l=n("date")(d.giveChallengeExpirationDate,m),s=n("date")(new Date,m);d.userEmail=t.getCurrentUserEmail();var i=e({participant:d.giveChallengeTo,name:d.giveChallengeName,description:d.giveChallengeDescription,finishDate:l,amount:d.giveChallengeAmountOfKudos}),g=r(l,s);g&&o.createChallenge(i).then(function(e){c(),$("#giveChallengeModal").modal("hide"),toastr.success("You successfully challenged "+e.data.participantName+" with "+a.acornPlural(e.data.amount)+"."),$("#modal"+d.id+"challenge").modal("hide"),t.setUserAvailableKudos(t.getUserAvailableKudos()-e.data.amount),d.userAvailableKudos=t.getUserAvailableKudos(),t.getNewChallenges().unshift(e.data)}).catch(function(){u("Challenge receiver does not exist")})}function r(e,t){return null==d.giveChallengeName?(u("Please enter Challenge name"),!1):null==d.giveChallengeAmountOfKudos?(u("Please enter valid challenge Acorns"),!1):d.giveChallengeAmountOfKudos>d.userAvailableKudos?(u("You don't have enough of Acorns"),!1):null==d.giveChallengeTo?(u("Please enter challenge receiver"),!1):d.giveChallengeTo==d.userEmail?(u("You can't challenge yourself"),!1):e<=t?(u("You can not choose date in the past"),!1):(u(""),d.showError=!1,!0)}function c(){d.giveChallengeReferee=null,d.giveChallengeName=null,d.giveChallengeDescription=null,d.giveChallengeExpirationDate=null,d.giveChallengeAmountOfKudos=null,d.autocompleteHide=!0,d.showError=!1,d.challengeFormErrorMessage=""}function u(e){d.showError=!0,d.challengeFormErrorMessage=e}var d=this,m="yyyy-MM-dd HH:mm:ss,sss";d.userAvailableKudos=0,d.autocompleteHide=!0,d.showError=!1,d.usersCollection=[],d.clearChallengeFormValues=c,d.challengeFormCheck=r,d.giveChallenge=i,d.showChallengeFormErrorMessage=u,d.$onInit=s()}e.$inject=["$httpParamSerializer","Resources","GiveChallengeService","$filter","ProfileService","Utils"],angular.module("myApp.components.giveChallengeSmall",[]).component("kudosGiveChallengeSmall",{templateUrl:"app/components/kudos-give-challenge-small/kudos-give-challenge-small.html",bindings:{email:"<",index:"<"},controller:e,controllerAs:"chSmall"})}(),function(){function e(e,t,o,n,l){function a(){void 0!=v.email&&void 0!=v.index&&(v.sendKudosTo=v.email,v.id=v.index),void 0==o.getUserAvailableKudos()?n.remaining().then(function(e){o.setUserAvailableKudos(e),v.userAvailableKudos=e}):v.userAvailableKudos=o.getUserAvailableKudos(),l.isEmptyCollection(o.getUsersCollection())?t.listUsers().then(function(e){o.setUsersCollection(e),v.usersCollection=o.getUsersCollection()}):v.usersCollection=o.getUsersCollection()}function s(){0==v.searchTermSelected?void 0!=v.sendKudosTo&&(v.sendKudosTo.length>1?v.autocompleteHide=!1:v.autocompleteHide=!0):v.searchTermSelected=!1}function i(e){v.sendKudosTo=e,v.searchTermSelected=!0,v.autocompleteHide=!0,v.text=e}function r(){u()&&t.sendKudos(h()).then(function(e){v.showSendKudosModal=!1,v.showSuccess=!0,o.setUserAvailableKudos(o.getUserAvailableKudos()-e.data.amount),p(),toastr.success("You successfully sent "+l.acornPlural(e.data.amount)+" to "+e.data.receiverFullName),c(e.data),g(),a()}).catch(function(){d("Receiver doesn't exist")})}function c(e){var t={receiver:e.receiver,message:e.message,amount:e.amount,timestamp:l.trimDate(e.timestamp)};o.getOutgoingKudosCollection().push(t),o.setSentKudosTable()}function u(){if(m(),null==v.sendKudosTo)d("Please enter receiver");else if(l.validateEmail(v.sendKudosTo))if(v.sendKudosTo===o.getCurrentUserEmail())d("Can't send kudos to yourself");else if(v.sendKudosAmount>o.getUserAvailableKudos())d("You don't have enough Acorns");else if(null==v.sendKudosAmount)d("Please enter amount");else{if(!(v.sendKudosAmount<=0))return m(),!0;d("Please enter more than zero")}else d("Please enter valid receiver email");return!1}function d(e){v.showError=!0,v.errorMessage=e}function m(){v.showError=!1,v.errorMessage=""}function g(){v.sendKudosTo="",v.sendKudosAmount=null,v.autocompleteHide=!0,v.sendKudosMessage="",m()}function h(){return e({receiverEmail:v.sendKudosTo,amount:v.sendKudosAmount,message:v.sendKudosMessage})}function p(){void 0!=v.template?$("#modal"+v.id).modal("hide"):$("#sendKudosModal").modal("hide")}function f(e){return"button"==e?"app/components/kudos-give-kudos/kudos-give-kudos-small.html":"app/components/kudos-give-kudos/kudos-give-kudos.html"}var v=this;v.showError=!1,v.errorMessage="",v.userAvailableKudos=0,v.usersCollection=[],v.maxSendKudosLength=o.getUserAvailableKudos(),v.autocompleteHide=!0,v.sendKudos=r,v.clearSendKudosFormValues=g,v.sendToInputChanged=s,v.selectAutoText=i,v.getTemplate=f,v.sendKudosValidation=u,v.showValidationErrorMessage=d,v.$onInit=a()}angular.module("myApp.components.giveKudos",[]).component("kudosGiveKudos",{template:'<ng-include src="vm.getTemplate(vm.template)"/>',bindings:{email:"<",index:"<",template:"="},controller:e,controllerAs:"vm"}),e.$inject=["$httpParamSerializer","GiveKudosService","Resources","Kudos","Utils"]}(),function(){function e(e,t){function o(){var e=t.getCurrentUser();e&&!n&&(n=!0,l.isCompleted=e.completed)}var n,l=this;e.$watch(function(){o()})}e.$inject=["$scope","Resources"],angular.module("myApp.components.info",[]).component("kudosInfo",{templateUrl:"app/components/kudos-infobar/kudos-infobar.html",controller:e,controllerAs:"info"})}(),function(){function e(e,t,o){function n(){a("all"),s("all")}function l(e){"all"==e?(r.criterion="All over period",a("all"),s("all")):"7"==e?(r.criterion="Past 7 days",a("week"),s("week")):"30"==e&&(a("month"),s("month"),r.criterion="Past 30 days")}function a(o){e.getTopReceivers(i(o)).then(function(e){t.setTopReceivers(e),r.topReceivers=t.getTopReceivers(),r.showLoader=!1})}function s(o){e.getTopSenders(i(o)).then(function(e){t.setTopSenders(e),r.topSenders=t.getTopSenders()})}function i(e){return o({period:e})}var r=this;r.receivers=!0,r.criterion="All over period",r.showLoader=!0,r.userReceivedKudos=0,r.topReceivers=[],r.topSenders=[],r.setAndUpdateTopSenders=s,r.setFilter=l,r.setAndUpdateTopReceivers=a,n()}e.$inject=["ProfileService","Resources","$httpParamSerializer"],angular.module("myApp.components.leaderboard",[]).component("kudosLeaderboard",{templateUrl:"app/components/kudos-leaderboard/kudos-leaderboard.view.html",controller:e,controllerAs:"leader"})}(),function(){function e(e,t,o,n,l,a,s,i,r){function c(){u(),a.followers().then(function(e){b.followersCount=e.data.length}),a.following().then(function(e){b.followingCount=e.data.length,b.showLoader=!1})}function u(){i.checkUser().then(function(e){e.logged?o.location.href="#/me":o.location.href="#/login"})}function d(){b.showLoader=!0,A=t("date")(b.birthdayEdit,K),k=t("date")(b.startedToWorkEdit,K),b.birthdayView=t("date")(b.birthdayEdit,K),b.startedToWorkView=t("date")(b.startedToWorkEdit,K),"Invalid Date"==A&&(A=null,b.birthdayView=null),"Invalid Date"==k&&(k=null,b.startedToWorkView=null),U=l({email:b.email,firstName:b.firstNameEdit,lastName:b.lastNameEdit,birthday:A,startedToWorkDate:k}),m()?(b.meErrorMessage=m(),b.startFade=!1,n(function(){b.startFade=!0,n(function(){b.meErrorMessage="",b.startFade=!1},1e3)},S),b.showLoader=!1):a.edit(U).then(function(e){b.editMode=!1,toastr.success("You have successfully edited your profile"),p(e),E=s.getCurrentUser(),C(A,k,E),b.showLoader=!1})}function m(){return b.firstNameEdit?g(b.firstNameEdit)?"In first name field only letters are allowed":b.lastNameEdit?g(b.lastNameEdit)?"In last name field only letters are allowed":A&&A>L?"Your birthday cannot be in the future...":!!(k&&k>L)&&"You are already working here. Please change your started to work date":"Last name can't be empty":"First name can't be empty"}function g(e){var t=/[^ąčęėįšųūžĄČĘĖĮŠŲŪŽåäöÅÄÖĀĒĢĪĶĻŅēīāņļķģüÜÕõa-z A-Z]/;return!!t.test(e)}function h(){E=s.getCurrentUser(),E&&!y&&(y=!0,f(E),p(E),b.email=E.email)}function p(e){b.firstName=e.firstName,b.lastName=e.lastName,b.birthday=e.birthday,b.startedToWork=e.startedToWorkDate}function f(e){b.firstNameEdit=e.firstName,b.lastNameEdit=e.lastName,b.birthdayEdit=new Date(w(e.birthday)),b.startedToWorkEdit=new Date(w(e.startedToWorkDate))}function v(){b.firstNameEdit=b.firstName,b.lastNameEdit=b.lastName,b.birthdayEdit=new Date(w(b.birthday)),b.startedToWorkEdit=new Date(w(b.startedToWork))}function C(e,t,o){e&&t&&(o.completed=!0,s.setCurrentUser(E))}function w(e){if(e)return e=e.split(" "),e[0]}var E,U,y,A,k,b=this,K="yyyy-MM-dd HH:mm:ss,sss",L=t("date")(new Date,K),S=4500;c(),b.followersCount=0,b.followingCount=0,b.isMeActive=!0,b.isFriendsActive=!1,b.showLoader=!0,b.lengthLimit=r.lengthLimit,b.symbolsLeft=r.symbolsLeft,b.edit=d,b.splitDate=w,b.checkIsCompleted=C,b.editAsView=v,b.checkInputs=m,b.checkPattern=g,b.setValuesView=p,b.setValuesEdit=f,e.$watch(function(){h()})}e.$inject=["$scope","$filter","$window","$timeout","$httpParamSerializer","MeService","Resources","ProfileService","Utils"],angular.module("myApp.components.me",[]).component("kudosMe",{templateUrl:"app/components/kudos-me/me.html"}).controller("MeController",e)}(),function(){function e(e,t,o,n,l,a){function s(){"/profile"==t.path()?c.selectedHome=!0:"/acorns"==t.path()?c.selectedAcorns=!0:"/following"==t.path()&&(c.selectedFollowing=!0),void 0==c.user?a.userHome().then(function(e){l.setCurrentUser(e),c.user=l.getCurrentUser()}):c.user=l.getCurrentUser()}function i(){r(),l.setCurrentUser(null),l.setCurrentUserEmail(null),a.logout().catch(function(){o.location.href="#/login"})}function r(){n.put("remember_user","false"),n.put("user_credentials","")}var c=this;c.selectedHome=!1,c.selectedAcorns=!1,c.selectedFollowing=!1,c.selectedChallenges=!1,c.logout=i,c.activate=s,s(),e.$on("$locationChangeStart",function(e,t,o){var n=$(".modal.fade.in");1==(n.data("bs.modal")||{}).isShown&&(n.modal("hide"),e.preventDefault())})}e.$inject=["$scope","$location","$window","$cookies","Resources","ProfileService"],angular.module("myApp.components.navbar",[]).component("kudosNavbar",{templateUrl:"app/components/kudos-navbar/kudos-navbar.html",controller:e,controllerAs:"nav"})}(),function(){function e(e,t,o,n){function l(){o.listUsers().then(function(e){h.usersCollection=e}),t.getFollowing().then(function(){h.followedCollection=t.getFollowingCollection()}),t.getFollowers().then(function(){h.followersCollection=t.getFollowers()})}function a(e){h.followerEmail=e,h.autocompleteHide=!0,h.text=e}function s(){void 0!=h.followerEmail&&(h.followerEmail.length>1?h.autocompleteHide=!1:h.autocompleteHide=!0)}function i(e){e=1!=e,$(document).on("hide.bs.modal","#sendKudosModalSmall",function(){e=1!=e})}function r(e){e&&(e==n.getCurrentUser().email?(toastr.error("You can't follow yourself"),h.followerEmail=""):t.addFollower(m(e)).then(function(e){u(e.data),h.followerEmail="",toastr.success("Started to follow "+e.data.userName,"Following")}))}function c(e,o,n){t.removeFollowing(m(e)).then(function(){d(n),toastr.success("Unfollowed "+o)})}function u(e){h.followedCollection.push(e)}function d(e){h.followedCollection.splice(e,1)}function m(t){return e({email:t})}function g(e){h.selectedEmail=e}var h=this;h.followedCollection=[],h.followersCollection=[],h.selectedEmail="",h.acornsAmount=1,h.showGiveBox=!1,h.addFollower=r,h.removeFollowing=c,h.addFollowingToCollection=u,h.removeFollowingFromCollection=d,h.transferDataToParam=m,h.selectRelationEmail=g,h.onModalHideEvent=i,h.selectAutoText=a,h.onInputChange=s,h.$onInit=l()}e.$inject=["$httpParamSerializer","RelationService","GiveKudosService","Resources"],angular.module("myApp.components.relationship",[]).component("kudosRelationship",{templateUrl:"app/components/kudos-relationship/kudos-relationship.html",controller:e,controllerAs:"relation"})}(),function(){function e(e,t,o){function n(t,o){g(),h.showHistoryLoader=!0,h.thisUsersEmail=t;var n={email:h.thisUsersEmail,start:h.transactionStartingIndex,end:h.transactionEndingIndex};e.getAll(n,o)?(h.transactionHistory=e.getAll(n,o),i(h.transactionHistory),h.showHistoryLoader=!1):e.getAllTransactions(n).then(function(t){h.transactionHistory=t,e.setAll(h.thisUsersEmail,h.transactionHistory),i(h.transactionHistory),h.showHistoryLoader=!1})}function l(t,o){g(),h.showHistoryLoader=!0,h.thisUsersEmail=t;var n={email:h.thisUsersEmail,start:h.transactionStartingIndex,end:h.transactionEndingIndex};e.getReceived(n,o)?(h.transactionHistory=e.getReceived(n,o),i(h.transactionHistory),h.showHistoryLoader=!1):e.getReceivedTransactions(n).then(function(t){h.transactionHistory=t,e.setReceived(h.thisUsersEmail,t),i(h.transactionHistory),h.showHistoryLoader=!1})}function a(t,o){g(),h.showHistoryLoader=!0,h.thisUsersEmail=t;var n={email:h.thisUsersEmail,start:h.transactionStartingIndex,end:h.transactionEndingIndex};e.getGave(n,o)?(h.transactionHistory=e.getGave(n,o),i(h.transactionHistory),h.showHistoryLoader=!1):e.getGaveTransactions(n).then(function(t){h.transactionHistory=t,e.setGave(h.thisUsersEmail,t),i(h.transactionHistory),h.showHistoryLoader=!1})}function s(t,o){g(),h.showHistoryLoader=!0,h.thisUsersEmail=t;var n={email:h.thisUsersEmail,start:h.transactionStartingIndex,end:h.transactionEndingIndex};e.getChallenges(n,o)?(h.transactionHistory=e.getChallenges(n,o),i(h.transactionHistory),h.showHistoryLoader=!1):e.getChallengesTransactions(n).then(function(t){h.transactionHistory=t,e.setChallenges(h.thisUsersEmail,t),i(h.transactionHistory),h.showHistoryLoader=!1})}function i(e){e[h.transactionEndingIndex-1]?h.showMoreButton=!0:h.showMoreButton=!1}function r(e){"more"==e&&(h.transactionEndingIndex+=10,h.showLessButton=!0,h.allOperations?n(h.thisUsersEmail,!1):h.receivedOperations?l(h.thisUsersEmail,!1):h.gaveOperations?a(h.thisUsersEmail,!1):h.challengeOperations&&s(h.thisUsersEmail,!1)),"less"==e&&(h.transactionEndingIndex=6,h.showMoreButton=!0,h.showLessButton=!1)}function c(e,t){h.transactionEndingIndex=6,h.allOperations?n(e,t):h.receivedOperations?l(e,t):h.gaveOperations?a(e,t):h.challengeOperations&&s(e,t)}function u(e){h.historyRadioBox!=e&&(h.historyRadioBox=e)}function d(e){switch(h.receivedOperations=!1,h.allOperations=!1,h.gaveOperations=!1,h.challengeOperations=!1,e){case"all":h.allOperations=!0;break;case"received":h.receivedOperations=!0;break;case"gave":h.gaveOperations=!0;break;case"challenges":h.challengeOperations=!0}h.showLessButton=!1,h.transactionEndingIndex=6,h.historyRadioBox="wonLost"}function m(e){return 1==h.page?"app/components/kudos-user-history/kudos-user-history-page.html":"app/components/kudos-user-history/kudos-user-history.html"}function g(){t(function(){h.spin=!1},1e3)}var h=this;h.showHistoryLoader=!0,h.historyRadioBox="wonLost",h.receivedOperations=!1,h.allOperations=!0,h.gaveOperations=!1,h.challengeOperations=!1,h.transactionEndingIndex=6,h.transactionStartingIndex=0,h.showMoreButton=!1,h.showLessButton=!1,h.split=o.split,h.acornPlural=o.acornPlural,h.changeRadioValue=u,h.changeView=d,h.checkButtons=i,h.showMoreLess=r,h.updateListAll=n,h.updateListReceived=l,h.updateListGave=a,h.updateListChallenges=s,h.showList=c,h.getTemplate=m,h.$onInit=function(){h.currentUser=h.user,1==h.page&&n(h.currentUser.email,!0),h.modalIndex=h.split(h.user.$$hashKey,":")[1]}}e.$inject=["UserHistoryService","$timeout","Utils"],angular.module("myApp.components.userHistory",[]).component("kudosUserHistory",{template:'<ng-include src="history.getTemplate()"/>',bindings:{user:"=",page:"<"},controller:e,controllerAs:"history"})}(),function(){function e(e){var t=this;t.showLoader=!0,e.getRandomIdea().then(function(e){t.randomQuote=e,t.showLoader=!1})}e.$inject=["WisdomWallIdeasService"],angular.module("myApp.components.wisdomWallIdeas",[]).component("wisdomWallIdeas",{templateUrl:"app/components/kudos-wisdom-wall-ideas/kudos-wisdom-wall-ideas.html",controller:e,controllerAs:"wisdom"})}();